---
title: å¤©æ¢¯èµ›L2 001ï½010æ€»ç»“
published: 2025-11-11
pinned: true
description:"ğŸ¥º"
tags: [Markdown, Blogging]
category: Examples
licenseName: "CC BY 4.0"
author: Bepxai
sourceLink: "https://github.com/bepxai/l2"
draft: false
date: 2025-11-11
image:
  url: 'https://example.com/image.jpg'
  alt: 'å›¾ç‰‡æè¿°'
pubDate: 2025-01-20
---
# å¤©æ¢¯èµ›L2 001ï½010æ€»ç»“

æŸæ—¥**Bepxai**åœ¨è¯»ä»£ç çš„æ—¶å€™ï¼Œæ·±æ„Ÿè‡ªå·±çš„ç åŠ›ä¸è¶³ï¼Œäºæ˜¯å°±æœ‰äº†è¿™ç¯‡æ–‡ç« ã€‚å‰åé¢˜å…±ç”¨äº†4å¤©å†™å®Œã€‚


## L2-001 ç´§æ€¥æ•‘æ´

### é¢˜ç›®æè¿°
ä½œä¸ºä¸€ä¸ªåŸå¸‚çš„åº”æ€¥æ•‘æ´é˜Ÿä¼çš„è´Ÿè´£äººï¼Œä½ æœ‰ä¸€å¼ ç‰¹æ®Šçš„å…¨å›½åœ°å›¾ã€‚åœ¨åœ°å›¾ä¸Šæ˜¾ç¤ºæœ‰å¤šä¸ªåˆ†æ•£çš„åŸå¸‚å’Œä¸€äº›è¿æ¥åŸå¸‚çš„å¿«é€Ÿé“è·¯ã€‚æ¯ä¸ªåŸå¸‚çš„æ•‘æ´é˜Ÿæ•°é‡å’Œæ¯ä¸€æ¡è¿æ¥ä¸¤ä¸ªåŸå¸‚çš„å¿«é€Ÿé“è·¯é•¿åº¦éƒ½æ ‡åœ¨åœ°å›¾ä¸Šã€‚å½“å…¶ä»–åŸå¸‚æœ‰ç´§æ€¥æ±‚åŠ©ç”µè¯ç»™ä½ çš„æ—¶å€™ï¼Œä½ çš„ä»»åŠ¡æ˜¯å¸¦é¢†ä½ çš„æ•‘æ´é˜Ÿå°½å¿«èµ¶å¾€äº‹å‘åœ°ï¼ŒåŒæ—¶ï¼Œä¸€è·¯ä¸Šå¬é›†å°½å¯èƒ½å¤šçš„æ•‘æ´é˜Ÿã€‚


### è¾“å…¥æ ¼å¼

è¾“å…¥ç¬¬ä¸€è¡Œç»™å‡º4ä¸ªæ­£æ•´æ•°Nã€Mã€Sã€Dï¼Œå…¶ä¸­Nï¼ˆ2â‰¤Nâ‰¤500ï¼‰æ˜¯åŸå¸‚çš„ä¸ªæ•°ï¼Œé¡ºä¾¿å‡è®¾åŸå¸‚çš„ç¼–å·ä¸º0 ~ (Nâˆ’1)ï¼›Mæ˜¯å¿«é€Ÿé“è·¯çš„æ¡æ•°ï¼›Sæ˜¯å‡ºå‘åœ°çš„åŸå¸‚ç¼–å·ï¼›Dæ˜¯ç›®çš„åœ°çš„åŸå¸‚ç¼–å·ã€‚

ç¬¬äºŒè¡Œç»™å‡ºNä¸ªæ­£æ•´æ•°ï¼Œå…¶ä¸­ç¬¬iä¸ªæ•°æ˜¯ç¬¬iä¸ªåŸå¸‚çš„æ•‘æ´é˜Ÿçš„æ•°ç›®ï¼Œæ•°å­—é—´ä»¥ç©ºæ ¼åˆ†éš”ã€‚éšåçš„Mè¡Œä¸­ï¼Œæ¯è¡Œç»™å‡ºä¸€æ¡å¿«é€Ÿé“è·¯çš„ä¿¡æ¯ï¼Œåˆ†åˆ«æ˜¯ï¼šåŸå¸‚1ã€åŸå¸‚2ã€å¿«é€Ÿé“è·¯çš„é•¿åº¦ï¼Œä¸­é—´ç”¨ç©ºæ ¼åˆ†å¼€ï¼Œæ•°å­—å‡ä¸ºæ•´æ•°ä¸”ä¸è¶…è¿‡500ã€‚è¾“å…¥ä¿è¯æ•‘æ´å¯è¡Œä¸”æœ€ä¼˜è§£å”¯ä¸€ã€‚
### è¾“å‡ºæ ¼å¼

ç¬¬ä¸€è¡Œè¾“å‡ºæœ€çŸ­è·¯å¾„çš„æ¡æ•°å’Œèƒ½å¤Ÿå¬é›†çš„æœ€å¤šçš„æ•‘æ´é˜Ÿæ•°é‡ã€‚ç¬¬äºŒè¡Œè¾“å‡ºä»Såˆ°Dçš„è·¯å¾„ä¸­ç»è¿‡çš„åŸå¸‚ç¼–å·ã€‚æ•°å­—é—´ä»¥ç©ºæ ¼åˆ†éš”ï¼Œè¾“å‡ºç»“å°¾ä¸èƒ½æœ‰å¤šä½™ç©ºæ ¼ã€‚

### è¾“å…¥æ ·ä¾‹

```
4 5 0 3
20 30 40 10
0 1 1
1 3 2
0 3 3
0 2 2
2 3 2
```
### è¾“å‡ºæ ·ä¾‹

```
2 60
0 1 3
```

### æ€è·¯

é‚»æ¥è¡¨å­˜å›¾ï¼Œå¼€å‡ ä¸ªè¾…åŠ©æ•°ç»„ï¼šcity[]å­˜æ•‘æ´é˜Ÿï¼Œtotal[]å­˜éå†æ—¶çš„æ•‘æ´é˜Ÿæ•°é‡ï¼Œroad[]å­˜æœ€çŸ­è·¯æ•°é‡ï¼Œpath[]å­˜å½“å‰ç‚¹çš„**å‰é©±**ã€‚è·‘ä¸€æ¬¡dijkstraå³å¯ éœ€æ³¨æ„dijkstraéœ€è¦åˆ¤æ–­å½“å‰ç‚¹ä»£ä»·å’Œæœ€çŸ­è·¯ä»£ä»·ç›¸ç­‰çš„æƒ…å†µã€‚
### ACä»£ç 
```cpp
#include <iostream>
#include <queue>
#include <cstring>
#include <vector>
using namespace std;

const int MAX=1e5;

struct Edge{
	int to,w;
	
	bool operator <(const Edge&s)const{
		return s.w<w;
	} ;
};

vector<Edge>G[MAX];
int dis[MAX],vis[MAX];

int road[MAX],path[MAX],city[MAX],total[MAX];

int n,m,s,d;

void add_edge(int from,int to,int w){
	G[from].push_back({to,w});
}

void Dijkstra(int start){
	priority_queue <Edge> q;
	q.push({start,0});
	dis[start]=0;
	path[start]=-1;
	total[start]=city[start];
	road[start]=1;
		
	while(q.size()){
		Edge temp=q.top();q.pop();
		int u=temp.to;
		if(vis[u])continue;
		vis[u]=1;
		for(Edge &e:G[u]){
			int v=e.to;
				if(e.w+temp.w<dis[v]){
				path[v]=u;
				total[v]=city[v]+total[u];
				dis[v]=e.w+temp.w;
				road[v]=road[u];
				if(v!=d)q.push({v,dis[v]});
			}
			else{
				if(e.w+temp.w==dis[v]){
					road[v]+=road[u];
					if(total[v]<total[u]+city[v]){
						total[v]=total[u]+city[v];
						path[v]=u;
					}
				}
			}			
		}
	}
}

int main()
{
    ios::sync_with_stdio(0),cin.tie(0),cout.tie(0);
    cin>>n>>m>>s>>d;
    memset(dis,0x3f3f,sizeof dis);
    for(int i=0;i<n;i++){
    	int v;
    	cin>>v;
    	city[i]=v;
    }
    for(int i=0;i<m;i++){
    	int u,v,w;
    	cin>>u>>v>>w;
    	add_edge(u,v,w);
    	add_edge(v,u,w);
    }
    Dijkstra(s);
    vector<int>ans;
    int now=d;
    while(now!=-1){
    	ans.push_back(now);
    	now=path[now];
    }
    cout<<road[d]<<" "<<total[d]<<endl;
    for(int i=(int)ans.size()-1;i>0;i--)cout<<ans[i]<<" ";
    cout<<ans[0];
    return 0;
}
```
## L2-002 é“¾è¡¨å»é‡
### é¢˜ç›®æè¿°
ç»™å®šä¸€ä¸ªå¸¦æ•´æ•°é”®å€¼çš„é“¾è¡¨ Lï¼Œä½ éœ€è¦æŠŠå…¶ä¸­ç»å¯¹å€¼é‡å¤çš„é”®å€¼ç»“ç‚¹åˆ æ‰ã€‚å³å¯¹æ¯ä¸ªé”®å€¼ Kï¼Œåªæœ‰ç¬¬ä¸€ä¸ªç»å¯¹å€¼ç­‰äº K çš„ç»“ç‚¹è¢«ä¿ç•™ã€‚åŒæ—¶ï¼Œæ‰€æœ‰è¢«åˆ é™¤çš„ç»“ç‚¹é¡»è¢«ä¿å­˜åœ¨å¦ä¸€ä¸ªé“¾è¡¨ä¸Šã€‚ä¾‹å¦‚ç»™å®š L ä¸º 21â†’-15â†’-15â†’-7â†’15ï¼Œä½ éœ€è¦è¾“å‡ºå»é‡åçš„é“¾è¡¨ 21â†’-15â†’-7ï¼Œè¿˜æœ‰è¢«åˆ é™¤çš„é“¾è¡¨ -15â†’15ã€‚


### è¾“å…¥æ ¼å¼
è¾“å…¥åœ¨ç¬¬ä¸€è¡Œç»™å‡º L çš„ç¬¬ä¸€ä¸ªç»“ç‚¹çš„åœ°å€å’Œä¸€ä¸ªæ­£æ•´æ•° Nï¼ˆâ‰¤10^5ï¼Œä¸ºç»“ç‚¹æ€»æ•°ï¼‰ã€‚ä¸€ä¸ªç»“ç‚¹çš„åœ°å€æ˜¯éè´Ÿçš„ 5 ä½æ•´æ•°ï¼Œç©ºåœ°å€ NULL ç”¨ âˆ’1 æ¥è¡¨ç¤ºã€‚

éšå N è¡Œï¼Œæ¯è¡ŒæŒ‰ä»¥ä¸‹æ ¼å¼æè¿°ä¸€ä¸ªç»“ç‚¹ï¼š

`åœ°å€ é”®å€¼ ä¸‹ä¸€ä¸ªç»“ç‚¹`
å…¶ä¸­åœ°å€æ˜¯è¯¥ç»“ç‚¹çš„åœ°å€ï¼Œé”®å€¼æ˜¯ç»å¯¹å€¼ä¸è¶…è¿‡10^4çš„æ•´æ•°ï¼Œä¸‹ä¸€ä¸ªç»“ç‚¹æ˜¯ä¸‹ä¸ªç»“ç‚¹çš„åœ°å€ã€‚
### è¾“å‡ºæ ¼å¼

é¦–å…ˆè¾“å‡ºå»é‡åçš„é“¾è¡¨ï¼Œç„¶åè¾“å‡ºè¢«åˆ é™¤çš„é“¾è¡¨ã€‚æ¯ä¸ªç»“ç‚¹å ä¸€è¡Œï¼ŒæŒ‰è¾“å…¥çš„æ ¼å¼è¾“å‡ºã€‚

### è¾“å…¥æ ·ä¾‹

```
00100 5
99999 -7 87654
23854 -15 00000
87654 15 -1
00000 -15 99999
00100 21 23854
```
### è¾“å‡ºæ ·ä¾‹

```
00100 21 23854
23854 -15 99999
99999 -7 -1
00000 -15 87654
87654 15 -1
```

### æ€è·¯
å…ˆéå†ä¸€æ¬¡é“¾è¡¨ï¼Œå°†é‡å¤çš„åŠ å…¥v2ï¼Œéé‡å¤çš„åŠ å…¥v1ã€‚å†éå†ä¸€æ¬¡è¾“å‡ºã€‚~~å¿½ç•¥ä¸‘é™‹çš„ä»£ç ~~
###ACä»£ç 
```cpp
#include <bits/stdc++.h>
using namespace std;
const int N = 1e5+19;

struct node{
    int key,next;
}List[N];

int first,n;
unordered_set<int> vis;
vector<int> v1;
vector<int> v2;

int main(){
    cin>>first>>n;
    int first2;
    for(int i=0;i<n;i++){
        int x,y,z;
        cin>>x>>y>>z;
        List[x].key=y;
        List[x].next=z;
    }
    int temp=first;
    while(temp!=-1){
        if(vis.find(abs(List[temp].key)) != vis.end()) { // å·²å­˜åœ¨é‡å¤å€¼
        if(v2.empty())first2=temp; 
            v2.push_back(temp); 
        } else {
            vis.insert(abs(List[temp].key));
            v1.push_back(temp);
        }
        temp=List[temp].next;
    }
    if(!v1.empty() &&v1.back()!=-1)v1.push_back(-1);//æ­¤å¤„éœ€è¦æ£€æŸ¥æ˜¯å¦ä¸ºç©ºï¼
    if(!v2.empty() &&v2.back()!=-1)v2.push_back(-1);
    for(int i=0;i<v1.size();i++){
        printf("%05d %d ", first, List[first].key);
        v1[i+1]==-1?printf("-1\n"):printf("%05d\n",v1[i+1]);
        first=v1[i+1];
        if(v1[i+1]==-1)break;
    }
    for(int i=0;i<v2.size();i++){
        printf("%05d %d ", first2, List[first2].key);
        v2[i+1]==-1?printf("-1\n"):printf("%05d\n",v2[i+1]);
        first2=v2[i+1];
        if(v2[i+1]==-1)break;
    }
    return 0;
}
```
## L2-003 æœˆé¥¼
### é¢˜ç›®æè¿°
æœˆé¥¼æ˜¯ä¸­å›½äººåœ¨ä¸­ç§‹ä½³èŠ‚æ—¶åƒçš„ä¸€ç§ä¼ ç»Ÿé£Ÿå“ï¼Œä¸åŒåœ°åŒºæœ‰è®¸å¤šä¸åŒé£å‘³çš„æœˆé¥¼ã€‚ç°ç»™å®šæ‰€æœ‰ç§ç±»æœˆé¥¼çš„åº“å­˜é‡ã€æ€»å”®ä»·ã€ä»¥åŠå¸‚åœºçš„æœ€å¤§éœ€æ±‚é‡ï¼Œè¯·ä½ è®¡ç®—å¯ä»¥è·å¾—çš„æœ€å¤§æ”¶ç›Šæ˜¯å¤šå°‘ã€‚

æ³¨æ„ï¼šé”€å”®æ—¶å…è®¸å–å‡ºä¸€éƒ¨åˆ†åº“å­˜ã€‚æ ·ä¾‹ç»™å‡ºçš„æƒ…å½¢æ˜¯è¿™æ ·çš„ï¼šå‡å¦‚æˆ‘ä»¬æœ‰ 3 ç§æœˆé¥¼ï¼Œå…¶åº“å­˜é‡åˆ†åˆ«ä¸º 18ã€15ã€10 ä¸‡å¨ï¼Œæ€»å”®ä»·åˆ†åˆ«ä¸º 75ã€72ã€45 äº¿å…ƒã€‚å¦‚æœå¸‚åœºçš„æœ€å¤§éœ€æ±‚é‡åªæœ‰ 20 ä¸‡å¨ï¼Œé‚£ä¹ˆæˆ‘ä»¬æœ€å¤§æ”¶ç›Šç­–ç•¥åº”è¯¥æ˜¯å–å‡ºå…¨éƒ¨ 15 ä¸‡å¨ç¬¬ 2 ç§æœˆé¥¼ã€ä»¥åŠ 5 ä¸‡å¨ç¬¬ 3 ç§æœˆé¥¼ï¼Œè·å¾— 72 + 45/2 = 94.5ï¼ˆäº¿å…ƒï¼‰ã€‚


### è¾“å…¥æ ¼å¼
æ¯ä¸ªè¾“å…¥åŒ…å«ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹ã€‚æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹å…ˆç»™å‡ºä¸€ä¸ªä¸è¶…è¿‡ 1000 çš„æ­£æ•´æ•° N è¡¨ç¤ºæœˆé¥¼çš„ç§ç±»æ•°ã€ä»¥åŠä¸è¶…è¿‡ 500ï¼ˆä»¥ä¸‡å¨ä¸ºå•ä½ï¼‰çš„æ­£æ•´æ•° D è¡¨ç¤ºå¸‚åœºæœ€å¤§éœ€æ±‚é‡ã€‚éšåä¸€è¡Œç»™å‡º N ä¸ªæ­£æ•°è¡¨ç¤ºæ¯ç§æœˆé¥¼çš„åº“å­˜é‡ï¼ˆä»¥ä¸‡å¨ä¸ºå•ä½ï¼‰ï¼›æœ€åä¸€è¡Œç»™å‡º N ä¸ªæ­£æ•°è¡¨ç¤ºæ¯ç§æœˆé¥¼çš„æ€»å”®ä»·ï¼ˆä»¥äº¿å…ƒä¸ºå•ä½ï¼‰ã€‚æ•°å­—é—´ä»¥ç©ºæ ¼åˆ†éš”ã€‚

### è¾“å‡ºæ ¼å¼

å¯¹æ¯ç»„æµ‹è¯•ç”¨ä¾‹ï¼Œåœ¨ä¸€è¡Œä¸­è¾“å‡ºæœ€å¤§æ”¶ç›Šï¼Œä»¥äº¿å…ƒä¸ºå•ä½å¹¶ç²¾ç¡®åˆ°å°æ•°ç‚¹å 2 ä½ã€‚

### è¾“å…¥æ ·ä¾‹

```
3 20
18 15 10
75 72 45
```
### è¾“å‡ºæ ·ä¾‹

```
94.50
```

### æ€è·¯
è®¡ç®—å•ä»·ä»¥ååŠ å…¥ä¼˜å…ˆé˜Ÿåˆ—ï¼Œè´ªå¿ƒè®¡ç®—æœ€å¤§æ”¶ç›Šåè¾“å‡ºã€‚
**æ€è€ƒï¼šstructå®Œå…¨å¯ä»¥ç”¨pairä»£æ›¿
###ACä»£ç 
```cpp
#include <bits/stdc++.h>
using namespace std;
const int N=1e5;
double cake[N],cap[N];
struct vtoindex{
    double v;
    int index;

    bool operator < (const vtoindex& a)const{
        return v<a.v;
    }
};
priority_queue<vtoindex> val;

int n;
double d;
double ans;

int main(){
    ios::sync_with_stdio(0),cin.tie(0),cout.tie(0);
    cin>>n>>d;
    for(int i=0;i<n;i++)cin>>cap[i];
    for(int i=0;i<n;i++)cin>>cake[i];
    for(int i=0;i<n;i++){
        if (cap[i] == 0) continue;
        double temp=cake[i]/cap[i];
        val.push({temp,i});
    }
    while(d>0){
        if(val.empty())break;
        auto x=val.top();val.pop();
        if(d-cap[x.index]<0){
            ans+=d*x.v;
            break;
        }else{
            ans+=cap[x.index]*x.v;
            d-=cap[x.index];
        }
    }
    cout<<fixed<<setprecision(2)<<ans;
    return 0;
}
```
## L2-004 è¿™æ˜¯äºŒå‰æœç´¢æ ‘å—ï¼Ÿ
### é¢˜ç›®æè¿°
ä¸€æ£µäºŒå‰æœç´¢æ ‘å¯è¢«é€’å½’åœ°å®šä¹‰ä¸ºå…·æœ‰ä¸‹åˆ—æ€§è´¨çš„äºŒå‰æ ‘ï¼šå¯¹äºä»»ä¸€ç»“ç‚¹ï¼Œ

   - å…¶å·¦å­æ ‘ä¸­æ‰€æœ‰ç»“ç‚¹çš„é”®å€¼å°äºè¯¥ç»“ç‚¹çš„é”®å€¼ï¼›
   - å…¶å³å­æ ‘ä¸­æ‰€æœ‰ç»“ç‚¹çš„é”®å€¼å¤§äºç­‰äºè¯¥ç»“ç‚¹çš„é”®å€¼ï¼›
   - å…¶å·¦å³å­æ ‘éƒ½æ˜¯äºŒå‰æœç´¢æ ‘ã€‚

æ‰€è°“äºŒå‰æœç´¢æ ‘çš„â€œé•œåƒâ€ï¼Œå³å°†æ‰€æœ‰ç»“ç‚¹çš„å·¦å³å­æ ‘å¯¹æ¢ä½ç½®åæ‰€å¾—åˆ°çš„æ ‘ã€‚

ç»™å®šä¸€ä¸ªæ•´æ•°é”®å€¼åºåˆ—ï¼Œç°è¯·ä½ ç¼–å†™ç¨‹åºï¼Œåˆ¤æ–­è¿™æ˜¯å¦æ˜¯å¯¹ä¸€æ£µäºŒå‰æœç´¢æ ‘æˆ–å…¶é•œåƒè¿›è¡Œå‰åºéå†çš„ç»“æœã€‚
### è¾“å…¥æ ¼å¼
è¾“å…¥çš„ç¬¬ä¸€è¡Œç»™å‡ºæ­£æ•´æ•° Nï¼ˆâ‰¤1000ï¼‰ã€‚éšåä¸€è¡Œç»™å‡º N ä¸ªæ•´æ•°é”®å€¼ï¼Œå…¶é—´ä»¥ç©ºæ ¼åˆ†éš”ã€‚

### è¾“å‡ºæ ¼å¼

å¦‚æœè¾“å…¥åºåˆ—æ˜¯å¯¹ä¸€æ£µäºŒå‰æœç´¢æ ‘æˆ–å…¶é•œåƒè¿›è¡Œå‰åºéå†çš„ç»“æœï¼Œåˆ™é¦–å…ˆåœ¨ä¸€è¡Œä¸­è¾“å‡º YES ï¼Œç„¶ååœ¨ä¸‹ä¸€è¡Œè¾“å‡ºè¯¥æ ‘ååºéå†çš„ç»“æœã€‚æ•°å­—é—´æœ‰ 1 ä¸ªç©ºæ ¼ï¼Œä¸€è¡Œçš„é¦–å°¾ä¸å¾—æœ‰å¤šä½™ç©ºæ ¼ã€‚è‹¥ç­”æ¡ˆæ˜¯å¦ï¼Œåˆ™è¾“å‡º NOã€‚


### è¾“å…¥æ ·ä¾‹

```
7
8 6 5 7 10 8 11
```
### è¾“å‡ºæ ·ä¾‹

```
YES
5 7 6 8 11 10 8
```

### æ€è·¯
dfsé‡Œå…ˆé€’å½’å·¦å­æ ‘ï¼Œåé€’å½’å³å­æ ‘ï¼Œæœ€åè¾“å‡ºå€¼è‡ªç„¶æ˜¯ååºéå†ã€‚å…ˆdfsä¸€æ¬¡ å¦‚æœä¸ºé•œåƒåˆ™å†dfsä¸€æ¬¡ï¼Œè¾“å‡ºã€‚
###ACä»£ç 
```cpp
#include <bits/stdc++.h>
using namespace std;
const int N=1e3+19;
int ismirror;
int ans[N],a[N];
int n;

void dfs(int L,int R){
    if(L>R)return;
    int i=L+1;int j=R;
    if(!ismirror){
        while(i<=R&&a[L]>a[i])++i;//æ‰¾åˆ°ç¬¬ä¸€ä¸ªå¤§äºæ ¹çš„
        while(j>L&&a[j]>=a[L])--j;//æ‰¾åˆ°ç¬¬ä¸€ä¸ªä¸å¤§äºç­‰äºæ ¹çš„
    }else{
        while(i<=R&&a[L]<=a[i])++i;
        while(j>L&&a[j]<a[L])--j;
    }
    if(i-j!=1)return;// root ... x j i x 
    dfs(L+1,j);
    dfs(i,R);
    ans[++ans[0]]=a[L];
}

int main(){
    ios::sync_with_stdio(0),cin.tie(0),cout.tie(0);
    cin>>n;
    for(int i=1;i<=n;i++)cin>>a[i];
    dfs(1,n);
    if(ans[0]!=n){
        ismirror=1;
        ans[0]=0;
        dfs(1,n);
    }
    if(ans[0]==n){
        cout<<"YES"<<endl;
        for(int i=1;i<=n;i++)i==n?cout<<ans[i]:cout<<ans[i]<<" ";
    }else{
        cout<<"NO";
    }
    return 0;
}
```

## L2-005 é›†åˆç›¸ä¼¼åº¦
### é¢˜ç›®æè¿°
ç»™å®šä¸¤ä¸ªæ•´æ•°é›†åˆï¼Œå®ƒä»¬çš„ç›¸ä¼¼åº¦å®šä¹‰ä¸ºï¼šNcâ€‹/Ntâ€‹Ã—100%ã€‚å…¶ä¸­Ncâ€‹æ˜¯ä¸¤ä¸ªé›†åˆéƒ½æœ‰çš„ä¸ç›¸ç­‰æ•´æ•°çš„ä¸ªæ•°ï¼ŒNtâ€‹æ˜¯ä¸¤ä¸ªé›†åˆä¸€å…±æœ‰çš„ä¸ç›¸ç­‰æ•´æ•°çš„ä¸ªæ•°ã€‚ä½ çš„ä»»åŠ¡å°±æ˜¯è®¡ç®—ä»»æ„ä¸€å¯¹ç»™å®šé›†åˆçš„ç›¸ä¼¼åº¦ã€‚
### è¾“å…¥æ ¼å¼
è¾“å…¥ç¬¬ä¸€è¡Œç»™å‡ºä¸€ä¸ªæ­£æ•´æ•°Nï¼ˆâ‰¤50ï¼‰ï¼Œæ˜¯é›†åˆçš„ä¸ªæ•°ã€‚éšåNè¡Œï¼Œæ¯è¡Œå¯¹åº”ä¸€ä¸ªé›†åˆã€‚æ¯ä¸ªé›†åˆé¦–å…ˆç»™å‡ºä¸€ä¸ªæ­£æ•´æ•°Mï¼ˆâ‰¤10^4ï¼‰ï¼Œæ˜¯é›†åˆä¸­å…ƒç´ çš„ä¸ªæ•°ï¼›ç„¶åè·ŸMä¸ª[0,10^9]åŒºé—´å†…çš„æ•´æ•°ã€‚

ä¹‹åä¸€è¡Œç»™å‡ºä¸€ä¸ªæ­£æ•´æ•°Kï¼ˆâ‰¤2000ï¼‰ï¼ŒéšåKè¡Œï¼Œæ¯è¡Œå¯¹åº”ä¸€å¯¹éœ€è¦è®¡ç®—ç›¸ä¼¼åº¦çš„é›†åˆçš„ç¼–å·ï¼ˆé›†åˆä»1åˆ°Nç¼–å·ï¼‰ã€‚æ•°å­—é—´ä»¥ç©ºæ ¼åˆ†éš”ã€‚
### è¾“å‡ºæ ¼å¼

å¯¹æ¯ä¸€å¯¹éœ€è¦è®¡ç®—çš„é›†åˆï¼Œåœ¨ä¸€è¡Œä¸­è¾“å‡ºå®ƒä»¬çš„ç›¸ä¼¼åº¦ï¼Œä¸ºä¿ç•™å°æ•°ç‚¹å2ä½çš„ç™¾åˆ†æ¯”æ•°å­—ã€‚

### è¾“å…¥æ ·ä¾‹
```
3
3 99 87 101
4 87 101 5 87
7 99 101 18 5 135 18 99
2
1 2
1 3
```
### è¾“å‡ºæ ·ä¾‹

```
50.00%
33.33%
```

### æ€è·¯
åˆ©ç”¨c++17çš„åˆé›†å‡½æ•°ï¼Œè®¡ç®—åè¾“å‡ºã€‚
###ACä»£ç 
```cpp
#include <bits/stdc++.h>
using namespace std;
const int N=1e5;

int n,cnt=1,m;
set<int>a[60];

void sintersection(set<int> &s1,set<int> &s2){
    set<int>intersection;
    set_intersection(s1.begin(),s1.end(),s2.begin(),s2.end(),
                     inserter(intersection,intersection.begin()));
    //cout<<intersection.size()<<endl;
    if(s1.size()+s2.size()-intersection.size()==0){
        cout<<"100%"<<endl;
        return;
    }
    float ans=(float)intersection.size() / (s1.size() + s2.size() - intersection.size()) * 100;
    cout<<fixed<<setprecision(2)<<ans<<"%"<<endl;
}

int main(){
    ios::sync_with_stdio(0),cin.tie(0),cout.tie(0);
    cin>>n;
    while(n--){
        int x;cin>>x;
        for(int i=0;i<x;i++){
            int y;cin>>y;
            a[cnt].insert(y);
        }
        cnt++;
    }
    cin>>m;
    while(m--){
        int set1,set2;cin>>set1>>set2;
        sintersection(a[set1],a[set2]);
    }
    return 0;
}
```

## L2-006 æ ‘çš„éå†
### é¢˜ç›®æè¿°
ç»™å®šä¸€æ£µäºŒå‰æ ‘çš„ååºéå†å’Œä¸­åºéå†ï¼Œè¯·ä½ è¾“å‡ºå…¶å±‚åºéå†çš„åºåˆ—ã€‚è¿™é‡Œå‡è®¾é”®å€¼éƒ½æ˜¯äº’ä¸ç›¸ç­‰çš„æ­£æ•´æ•°ã€‚
### è¾“å…¥æ ¼å¼
è¾“å…¥ç¬¬ä¸€è¡Œç»™å‡ºä¸€ä¸ªæ­£æ•´æ•°Nï¼ˆâ‰¤30ï¼‰ï¼Œæ˜¯äºŒå‰æ ‘ä¸­ç»“ç‚¹çš„ä¸ªæ•°ã€‚ç¬¬äºŒè¡Œç»™å‡ºå…¶ååºéå†åºåˆ—ã€‚ç¬¬ä¸‰è¡Œç»™å‡ºå…¶ä¸­åºéå†åºåˆ—ã€‚æ•°å­—é—´ä»¥ç©ºæ ¼åˆ†éš”ã€‚
### è¾“å‡ºæ ¼å¼
åœ¨ä¸€è¡Œä¸­è¾“å‡ºè¯¥æ ‘çš„å±‚åºéå†çš„åºåˆ—ã€‚æ•°å­—é—´ä»¥1ä¸ªç©ºæ ¼åˆ†éš”ï¼Œè¡Œé¦–å°¾ä¸å¾—æœ‰å¤šä½™ç©ºæ ¼ã€‚
### è¾“å…¥æ ·ä¾‹
```
7
2 3 1 5 7 6 4
1 2 3 4 5 6 7
```
### è¾“å‡ºæ ·ä¾‹

```
4 1 6 3 5 7 2
```

### æ€è·¯
ååºéå†çš„æœ€åä¸€ä¸ªå€¼å³ä¸º**æ ¹èŠ‚ç‚¹**çš„å€¼ï¼Œåœ¨ä¸­åºéå†ä¸­æ‰¾åˆ°æ ¹èŠ‚ç‚¹çš„ä½ç½®ï¼Œå¯¹æ¯”ä¸Šä¸‹ç•Œå³å¯å¾—çŸ¥å­æ ‘çš„èŒƒå›´ï¼Œdfséå†ä¸€æ¬¡å»ºæ ‘ï¼Œå†bfsè¾“å‡ºå³å¯ã€‚
###ACä»£ç 
```cpp
#include <bits/stdc++.h>

using namespace std;
const int N=1e4;
int mid[N],post[N];

int tree[N];
int len;
int n;
//å…ˆé€’å½’å»ºæ ‘ å†bfs
void dfs(int x,int l1,int r1,int l2,int r2){
    if(l1>r1||l2>r2){
        tree[x]=-1;//ç»“æŸ
        return;
    }
    int t=0;
    tree[x]=post[r2];//é€’å½’èµ‹æ ¹å€¼
    for(int i=l1;i<=r1;i++)
        if(mid[i]==post[r2])
            t=i;//æ ¹èŠ‚ç‚¹ç´¢å¼•
    len=t-l1;
    dfs(x<<1,l1,t-1,l2,l2+len-1);
    len=r1-t;
    dfs(x<<1|1,t+1,r1,r2-len,r2-1);
}

void bfs(){
    cout<<tree[1];
    queue<int> q;
    q.push(1);
    while(q.size()){
        int x=q.front();q.pop();
        if(tree[x<<1]!=-1){
            cout<<" "<<tree[x<<1];
            q.push(x<<1);
        }
        if(tree[x<<1|1]!=-1){
            cout<<" "<<tree[x<<1|1];
            q.push(x<<1|1);
        }
    }
    cout<<endl;
}

int main(){
    cin>>n;
    for(int i=1;i<=n;i++)cin>>post[i];
    for(int i=1;i<=n;i++)cin>>mid[i];
    dfs(1,1,n,1,n);
    bfs();
    return 0;
}
```
## L2-007 å®¶åº­æˆ¿äº§
### é¢˜ç›®æè¿°
ç»™å®šæ¯ä¸ªäººçš„å®¶åº­æˆå‘˜å’Œå…¶è‡ªå·±åä¸‹çš„æˆ¿äº§ï¼Œè¯·ä½ ç»Ÿè®¡å‡ºæ¯ä¸ªå®¶åº­çš„äººå£æ•°ã€äººå‡æˆ¿äº§é¢ç§¯åŠæˆ¿äº§å¥—æ•°ã€‚
### è¾“å…¥æ ¼å¼
è¾“å…¥ç¬¬ä¸€è¡Œç»™å‡ºä¸€ä¸ªæ­£æ•´æ•°Nï¼ˆâ‰¤1000ï¼‰ï¼ŒéšåNè¡Œï¼Œæ¯è¡ŒæŒ‰ä¸‹åˆ—æ ¼å¼ç»™å‡ºä¸€ä¸ªäººçš„æˆ¿äº§ï¼š
`ç¼–å· çˆ¶ æ¯ k å­©å­1 ... å­©å­k æˆ¿äº§å¥—æ•° æ€»é¢ç§¯`
å…¶ä¸­ç¼–å·æ˜¯æ¯ä¸ªäººç‹¬æœ‰çš„ä¸€ä¸ª4ä½æ•°çš„ç¼–å·ï¼›çˆ¶å’Œæ¯åˆ†åˆ«æ˜¯è¯¥ç¼–å·å¯¹åº”çš„è¿™ä¸ªäººçš„çˆ¶æ¯çš„ç¼–å·ï¼ˆå¦‚æœå·²ç»è¿‡ä¸–ï¼Œåˆ™æ˜¾ç¤º-1ï¼‰ï¼›kï¼ˆ0â‰¤kâ‰¤5ï¼‰æ˜¯è¯¥äººçš„å­å¥³çš„ä¸ªæ•°ï¼›å­©å­iæ˜¯å…¶å­å¥³çš„ç¼–å·ã€‚
### è¾“å‡ºæ ¼å¼
é¦–å…ˆåœ¨ç¬¬ä¸€è¡Œè¾“å‡ºå®¶åº­ä¸ªæ•°ï¼ˆæ‰€æœ‰æœ‰äº²å±å…³ç³»çš„äººéƒ½å±äºåŒä¸€ä¸ªå®¶åº­ï¼‰ã€‚éšåæŒ‰ä¸‹åˆ—æ ¼å¼è¾“å‡ºæ¯ä¸ªå®¶åº­çš„ä¿¡æ¯ï¼š

`å®¶åº­æˆå‘˜çš„æœ€å°ç¼–å· å®¶åº­äººå£æ•° äººå‡æˆ¿äº§å¥—æ•° äººå‡æˆ¿äº§é¢ç§¯`

å…¶ä¸­äººå‡å€¼è¦æ±‚ä¿ç•™å°æ•°ç‚¹å3ä½ã€‚å®¶åº­ä¿¡æ¯é¦–å…ˆæŒ‰äººå‡é¢ç§¯é™åºè¾“å‡ºï¼Œè‹¥æœ‰å¹¶åˆ—ï¼Œåˆ™æŒ‰æˆå‘˜ç¼–å·çš„å‡åºè¾“å‡ºã€‚
### è¾“å…¥æ ·ä¾‹
```
10
6666 5551 5552 1 7777 1 100
1234 5678 9012 1 0002 2 300
8888 -1 -1 0 1 1000
2468 0001 0004 1 2222 1 500
7777 6666 -1 0 2 300
3721 -1 -1 1 2333 2 150
9012 -1 -1 3 1236 1235 1234 1 100
1235 5678 9012 0 1 50
2222 1236 2468 2 6661 6662 1 300
2333 -1 3721 3 6661 6662 6663 1 100
```
### è¾“å‡ºæ ·ä¾‹

```
3
8888 1 1.000 1000.000
0001 15 0.600 100.000
5551 4 0.750 100.000
```

### æ€è·¯
æ¨¡æ‹Ÿé¢˜æ„å³å¯ï¼Œå…ˆè¾“å…¥ï¼Œå¯¹äºæ¯ä¸ªäººç”¨å¹¶æŸ¥é›†åˆå¹¶åˆ°idæ›´å°çš„ç¥–å…ˆèŠ‚ç‚¹ä¸Šï¼Œå†éå†setï¼Œå¯¹ç¥–å…ˆèŠ‚ç‚¹å»ºç«‹é”®å€¼å¯¹å¹¶å¡«å…¥æ•°æ®ï¼Œæœ€ååŠ å…¥vectoræ’åºåè¾“å‡ºã€‚
###ACä»£ç 
```cpp
//å¹¶æŸ¥é›†
#include <bits/stdc++.h>
using namespace std;
const int N=1e4+10;

struct family{
    int x,p,num;
    double area;
}head[N];

int fa[N];
set<int>people;
map<int,family>mp;

int find(int x){
    return fa[x]==x?x:fa[x]=find(fa[x]);
}
void Union(int a, int b) //åˆå¹¶ç¥–å…ˆ
{
    int f1 = find(a);
    int f2 = find(b);
    if (f1 < f2)
        fa[f2] = f1; 
    else
        fa[f1] = f2;
}

bool cmp(family &a1, family &a2)
{
    if (a1.area / a1.p == a2.area / a2.p)
        return a1.x < a2.x;
    return a1.area / a1.p > a2.area / a2.p;
}

int n;

int main(){
    for (int i = 0; i < N; i++) fa[i] = i;
    cin>>n;
    while(n--){
        int x,y,z;
        cin>>x>>y>>z;
        people.insert(x);
        if(y!=-1){
            people.insert(y);
            Union(x,y);
        }
        if(z!=-1){
            people.insert(z);
            Union(x,z);
        }
        int num;
        cin>>num;
        while(num--){
            int index;
            cin>>index;
            people.insert(index);
            Union(x,index);
        }
        cin>>head[x].num>>head[x].area;
    }
    for(int i:people){
        int id=find(i);
        mp[id].x=id;
        mp[id].p++;
        mp[id].num+=head[i].num;
        mp[id].area+=head[i].area;
    }
    cout<<mp.size()<<endl;
    vector<family>ans;
    for(auto i:mp){
        ans.push_back(i.second);
    }
    sort(ans.begin(),ans.end(),cmp);
    for(auto i:ans){
        printf("%04d %d %.3lf %.3lf\n", i.x, i.p, 1.0 * i.num / i.p, 1.0 * i.area / i.p);
    }
    return 0;
}
```
## L2-008 æœ€é•¿å¯¹ç§°å­ä¸²
### é¢˜ç›®æè¿°
å¯¹ç»™å®šçš„å­—ç¬¦ä¸²ï¼Œæœ¬é¢˜è¦æ±‚ä½ è¾“å‡ºæœ€é•¿å¯¹ç§°å­ä¸²çš„é•¿åº¦ã€‚ä¾‹å¦‚ï¼Œç»™å®š**Is PAT&TAP symmetric?**ï¼Œæœ€é•¿å¯¹ç§°å­ä¸²ä¸º**s PAT&TAP s**ï¼Œäºæ˜¯ä½ åº”è¯¥è¾“å‡º11ã€‚
### è¾“å…¥æ ¼å¼
è¾“å…¥åœ¨ä¸€è¡Œä¸­ç»™å‡ºé•¿åº¦ä¸è¶…è¿‡1000çš„éç©ºå­—ç¬¦ä¸²ã€‚
### è¾“å‡ºæ ¼å¼
åœ¨ä¸€è¡Œä¸­è¾“å‡ºæœ€é•¿å¯¹ç§°å­ä¸²çš„é•¿åº¦ã€‚
### è¾“å…¥æ ·ä¾‹
```
Is PAT&TAP symmetric?
```
### è¾“å‡ºæ ·ä¾‹

```
11
```

### æ€è·¯
æœ¬é¢˜ä¸ºmanacheræ¨¡æ¿ã€‚
manacheræ€è·¯æ˜¯å…ˆåœ¨å­—ç¬¦ä¸²ä¸­æ’å…¥ # ä»¥é¢„å¤„ç†ï¼Œç›®çš„æ˜¯æŠŠæ‰€æœ‰å­—ç¬¦ä¸²éƒ½ç»Ÿä¸€ä¸ºå¥‡æ•°é•¿åº¦ã€‚ç„¶åç»´æŠ¤ä¸€ä¸ª**æœ€é•¿å›æ–‡å­åºåˆ—**çš„**ä¸­å¿ƒç‚¹c**å’Œ**å³è¾¹ç•Œr**ï¼Œ å¯¹äºéå†çš„æ¯ä¸ªå­—ç¬¦iï¼Œå¦‚æœåœ¨rä»¥å†…åˆ™æœ‰``r=min(2c-i,r-i)``ä¸¤ç§æƒ…å†µï¼Œå¦åˆ™ä»1å¼€å§‹æš´åŠ›è®¡ç®—ï¼Œç„¶åé‡æ–°ç»™cå’Œrèµ‹å€¼ã€‚
###ACä»£ç 
```cpp
//manacherç®—æ³•
#include <bits/stdc++.h>
using namespace std;
const int N=3e3+10;
int p[N];
int n,ans;

void manacher(string a){
    int r=0,c=0;
    for(int i=0;i<n;i++){
        if(i<r)p[i]=min(p[(c<<1)-i],r-i);
        else p[i]=1;
        while(i-p[i]>0&&i+p[i]<n&&a[i-p[i]]==a[i+p[i]])p[i]++;//è¾¹ç•Œæ¡ä»¶
        if(i+p[i]>r){
            r=i+p[i];
            c=i;
        }
        ans=max(ans,p[i]-1);
    }
    cout<<ans<<endl;
}

int main(){
    string a="@#";//å“¨å…µ
    char c;
    while(cin.get(c))a+=c,a+='#';//ä½¿ç”¨cin.getä¸ä¼šå¿½ç•¥ç©ºæ ¼
    a+='$';//å“¨å…µ
    n=a.size();
    //cout<<a;
    manacher(a);
    return 0;
}
```
## L2-009 æŠ¢çº¢åŒ…
### é¢˜ç›®æè¿°
æ²¡æœ‰äººæ²¡æŠ¢è¿‡çº¢åŒ…å§â€¦â€¦ è¿™é‡Œç»™å‡ºNä¸ªäººä¹‹é—´äº’ç›¸å‘çº¢åŒ…ã€æŠ¢çº¢åŒ…çš„è®°å½•ï¼Œè¯·ä½ ç»Ÿè®¡ä¸€ä¸‹ä»–ä»¬æŠ¢çº¢åŒ…çš„æ”¶è·ã€‚
### è¾“å…¥æ ¼å¼
è¾“å…¥ç¬¬ä¸€è¡Œç»™å‡ºä¸€ä¸ªæ­£æ•´æ•°Nï¼ˆâ‰¤10^4ï¼‰ï¼Œå³å‚ä¸å‘çº¢åŒ…å’ŒæŠ¢çº¢åŒ…çš„æ€»äººæ•°ï¼Œåˆ™è¿™äº›äººä»1åˆ°Nç¼–å·ã€‚éšåNè¡Œï¼Œç¬¬iè¡Œç»™å‡ºç¼–å·ä¸ºiçš„äººå‘çº¢åŒ…çš„è®°å½•ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š

K N1â€‹ P1â€‹ â‹¯ NKâ€‹ PKâ€‹

å…¶ä¸­Kï¼ˆ0â‰¤Kâ‰¤20ï¼‰æ˜¯å‘å‡ºå»çš„çº¢åŒ…ä¸ªæ•°ï¼ŒNiâ€‹æ˜¯æŠ¢åˆ°çº¢åŒ…çš„äººçš„ç¼–å·ï¼ŒPiâ€‹ï¼ˆ>0ï¼‰æ˜¯å…¶æŠ¢åˆ°çš„çº¢åŒ…é‡‘é¢ï¼ˆä»¥åˆ†ä¸ºå•ä½ï¼‰ã€‚æ³¨æ„ï¼šå¯¹äºåŒä¸€ä¸ªäººå‘å‡ºçš„çº¢åŒ…ï¼Œæ¯äººæœ€å¤šåªèƒ½æŠ¢1æ¬¡ï¼Œä¸èƒ½é‡å¤æŠ¢ã€‚
### è¾“å‡ºæ ¼å¼
æŒ‰ç…§æ”¶å…¥é‡‘é¢ä»é«˜åˆ°ä½çš„é€’å‡é¡ºåºè¾“å‡ºæ¯ä¸ªäººçš„ç¼–å·å’Œæ”¶å…¥é‡‘é¢ï¼ˆä»¥å…ƒä¸ºå•ä½ï¼Œè¾“å‡ºå°æ•°ç‚¹å2ä½ï¼‰ã€‚æ¯ä¸ªäººçš„ä¿¡æ¯å ä¸€è¡Œï¼Œä¸¤æ•°å­—é—´æœ‰1ä¸ªç©ºæ ¼ã€‚å¦‚æœæ”¶å…¥é‡‘é¢æœ‰å¹¶åˆ—ï¼Œåˆ™æŒ‰æŠ¢åˆ°çº¢åŒ…çš„ä¸ªæ•°é€’å‡è¾“å‡ºï¼›å¦‚æœè¿˜æœ‰å¹¶åˆ—ï¼Œåˆ™æŒ‰ä¸ªäººç¼–å·é€’å¢è¾“å‡ºã€‚
### è¾“å…¥æ ·ä¾‹
```
10
3 2 22 10 58 8 125
5 1 345 3 211 5 233 7 13 8 101
1 7 8800
2 1 1000 2 1000
2 4 250 10 320
6 5 11 9 22 8 33 7 44 10 55 4 2
1 3 8800
2 1 23 2 123
1 8 250
4 2 121 4 516 7 112 9 10
```
### è¾“å‡ºæ ·ä¾‹
```
1 11.63
2 3.63
8 3.63
3 2.11
7 1.69
6 -1.67
9 -2.18
10 -3.26
5 -3.26
4 -12.32
```

### æ€è·¯
æ¨¡æ‹Ÿå³å¯ï¼Œå‘ç‚¹åœ¨äºï¼š
- æµ®ç‚¹æ•°ä¸èƒ½ç›´æ¥ç›¸ç­‰ï¼Œè€Œåº”è¯¥è®¡ç®—å·®å€¼çš„ç²¾åº¦ã€‚
###ACä»£ç 
```cpp
#include<bits/stdc++.h>
using namespace std;
const int N=1e4+10;
const double esp=1e-9;
struct bag{
    int n;
    int cnt=0;
    double price;
};
vector<bag>people(N);
bool cmp(bag& b1,bag& b2){
    if(fabs(b1.price-b2.price)<=esp){//æµ®ç‚¹æ•°æ¯”è¾ƒéœ€è€ƒè™‘ç²¾åº¦
        if(b1.cnt==b2.cnt)
            return b1.n<b2.n;
        return b1.cnt>b2.cnt;
    }
    return b1.price>b2.price;
}
int n;
int main(){
    ios::sync_with_stdio(0),cin.tie(0),cout.tie(0);
    int index=1;
    cin>>n;
    for(int i=1;i<=n;i++)
        people[i].n=i;
    while(n--){
        int k;
        double sum=0;
        cin>>k;
        unordered_set<int>set1;
        while(k--){
            int n1;
            double p1;
            cin>>n1>>p1;
            if(set1.find(n1)==set1.end()){
                set1.insert(n1);
                people[n1].cnt++;
                people[n1].price+=(p1*0.01);
                sum+=(p1*0.01);
            }
        }
        set1.clear();
        people[index++].price-=sum;
    }
    sort(people.begin(),people.end(),cmp);
    for(int i=0;i<people.size();i++){
        if(people[i].n==0&&people[i].cnt==0&&people[i].price==0)continue;
        cout<<people[i].n<<' '<<fixed<<setprecision(2)<<people[i].price<<endl;
    }
    return 0;
}
```
## L2-010 æ’åº§ä½
### é¢˜ç›®æè¿°
å¸ƒç½®å®´å¸­æœ€å¾®å¦™çš„äº‹æƒ…ï¼Œå°±æ˜¯ç»™å‰æ¥å‚å®´çš„å„ä½å®¾å®¢å®‰æ’åº§ä½ã€‚æ— è®ºå¦‚ä½•ï¼Œæ€»ä¸èƒ½æŠŠä¸¤ä¸ªæ­»å¯¹å¤´æ’åˆ°åŒä¸€å¼ å®´ä¼šæ¡Œæ—ï¼è¿™ä¸ªè‰°å·¨ä»»åŠ¡ç°åœ¨å°±äº¤ç»™ä½ ï¼Œå¯¹ä»»ä½•ä¸€å¯¹å®¢äººï¼Œè¯·ç¼–å†™ç¨‹åºå‘Šè¯‰ä¸»äººä»–ä»¬æ˜¯å¦èƒ½è¢«å®‰æ’åŒå¸­ã€‚
### è¾“å…¥æ ¼å¼
è¾“å…¥ç¬¬ä¸€è¡Œç»™å‡º3ä¸ªæ­£æ•´æ•°ï¼šNï¼ˆâ‰¤100ï¼‰ï¼Œå³å‰æ¥å‚å®´çš„å®¾å®¢æ€»äººæ•°ï¼Œåˆ™è¿™äº›äººä»1åˆ°Nç¼–å·ï¼›Mä¸ºå·²çŸ¥ä¸¤ä¸¤å®¾å®¢ä¹‹é—´çš„å…³ç³»æ•°ï¼›Kä¸ºæŸ¥è¯¢çš„æ¡æ•°ã€‚éšåMè¡Œï¼Œæ¯è¡Œç»™å‡ºä¸€å¯¹å®¾å®¢ä¹‹é—´çš„å…³ç³»ï¼Œæ ¼å¼ä¸ºï¼šå®¾å®¢1 å®¾å®¢2 å…³ç³»ï¼Œå…¶ä¸­å…³ç³»ä¸º1è¡¨ç¤ºæ˜¯æœ‹å‹ï¼Œ-1è¡¨ç¤ºæ˜¯æ­»å¯¹å¤´ã€‚æ³¨æ„ä¸¤ä¸ªäººä¸å¯èƒ½æ—¢æ˜¯æœ‹å‹åˆæ˜¯æ•Œäººã€‚æœ€åKè¡Œï¼Œæ¯è¡Œç»™å‡ºä¸€å¯¹éœ€è¦æŸ¥è¯¢çš„å®¾å®¢ç¼–å·ã€‚

è¿™é‡Œå‡è®¾æœ‹å‹çš„æœ‹å‹ä¹Ÿæ˜¯æœ‹å‹ã€‚ä½†æ•Œäººçš„æ•Œäººå¹¶ä¸ä¸€å®šå°±æ˜¯æœ‹å‹ï¼Œæœ‹å‹çš„æ•Œäººä¹Ÿä¸ä¸€å®šæ˜¯æ•Œäººã€‚åªæœ‰å•çº¯ç›´æ¥çš„æ•Œå¯¹å…³ç³»æ‰æ˜¯ç»å¯¹ä¸èƒ½åŒå¸­çš„ã€‚
### è¾“å‡ºæ ¼å¼
å¯¹æ¯ä¸ªæŸ¥è¯¢è¾“å‡ºä¸€è¡Œç»“æœï¼šå¦‚æœä¸¤ä½å®¾å®¢ä¹‹é—´æ˜¯æœ‹å‹ï¼Œä¸”æ²¡æœ‰æ•Œå¯¹å…³ç³»ï¼Œåˆ™è¾“å‡ºNo problemï¼›å¦‚æœä»–ä»¬ä¹‹é—´å¹¶ä¸æ˜¯æœ‹å‹ï¼Œä½†ä¹Ÿä¸æ•Œå¯¹ï¼Œåˆ™è¾“å‡ºOKï¼›å¦‚æœä»–ä»¬ä¹‹é—´æœ‰æ•Œå¯¹ï¼Œç„¶è€Œä¹Ÿæœ‰å…±åŒçš„æœ‹å‹ï¼Œåˆ™è¾“å‡ºOK but...ï¼›å¦‚æœä»–ä»¬ä¹‹é—´åªæœ‰æ•Œå¯¹å…³ç³»ï¼Œåˆ™è¾“å‡ºNo wayã€‚
### è¾“å…¥æ ·ä¾‹
```
7 8 4
5 6 1
2 7 -1
1 3 1
3 4 1
6 7 -1
1 2 1
1 4 1
2 3 -1
3 4
5 7
2 3
7 2
```
### è¾“å‡ºæ ·ä¾‹

```
No problem
OK
OK but...
No way
```

### æ€è·¯
å°†æ ·ä¾‹ç”»å›¾ï¼š
![L2_010](/images/picture1.png "L2_010")
çœ‹å›¾å¯çŸ¥ åªéœ€è¦ç”¨å¹¶æŸ¥é›†åˆå¹¶æ ‘å æŸ¥æ‰¾ä¸¤ç‚¹ä¹‹é—´çš„å…³ç³»å’Œä¸¤ç‚¹çˆ¶èŠ‚ç‚¹æ˜¯å¦ç›¸åŒï¼Œå°±å¯ä»¥è·å¾—ç­”æ¡ˆã€‚å…·ä½“ä¸ºï¼š
- å…³ç³»ä¸º-1è€Œåœ¨åŒä¸€æ£µæ ‘ï¼šè¾“å‡º3ã€‚
- å…³ç³»ä¸º1è€Œåœ¨åŒä¸€æ£µæ ‘ï¼šè¾“å‡º1ã€‚
- å…³ç³»ä¸º-1è€Œä¸åœ¨åŒä¸€æ£µæ ‘ï¼šè¾“å‡º4ã€‚
- å…¶ä»– è¾“å‡º2ã€‚

###ACä»£ç 
```cpp
#include <bits/stdc++.h>
using namespace std;

const int N=1e4+10;
int fa[N];
map<pair<int,int>,int> mp;
set<pair<int,int>> set1;
int n,m,k;

int find(int x){
    return fa[x]==x?x:fa[x]=find(fa[x]);
}
    
int main(){
    cin>>n>>m>>k;
    for(int i=1;i<=n;i++)fa[i]=i;
    for(int i=0;i<m;i++){
        int u,v,w;
        cin>>u>>v>>w;
        if(set1.find({u,v})==set1.end()&&set1.find({v,u})==set1.end()){
            set1.insert({u,v});
            set1.insert({v,u});
            if(w!=-1)fa[find(u)]=find(v);
            mp.insert({{u,v},w});
            //cout<<mp[{u,v}]<<endl;
        }
    }
    while(k--){
        int x,y;
        cin>>x>>y;
        auto c1=mp.find({x,y});
        auto c2=mp.find({y,x});
        if(c1!=mp.end()){
            if(find(x)==find(y)&&(c1->second==-1))
                cout<<"OK but..."<<endl;
            else if(find(x)==find(y)&&(c1->second==1))
                cout<<"No problem"<<endl;
            else if(find(x)!=find(y)&&(c1->second==-1))
                cout<<"No way"<<endl;
        }
        else if(c2!=mp.end()){
            if(find(x)==find(y)&&(c2->second==-1))
                cout<<"OK but..."<<endl;
            else if(find(x)==find(y)&&(c2->second==1))
                cout<<"No problem"<<endl;
            else if(find(x)!=find(y)&&(c2->second==-1))
                cout<<"No way"<<endl;
        }
        else
            cout<<"OK"<<endl;
    }
    return 0;
}
```
